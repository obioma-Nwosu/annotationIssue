{"version":3,"file":"chunks/2472.chunk.js","mappings":"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","sources":["webpack://webviewer-ui/./src/components/AnnotationContentOverlay/FormFieldPlaceHolderOverlay.js","webpack://webviewer-ui/./src/components/AnnotationContentOverlay/AnnotationContentOverlay.js","webpack://webviewer-ui/./src/components/AnnotationContentOverlay/index.js","webpack://webviewer-ui/./src/components/AnnotationContentOverlay/AnnotationContentOverlay.scss","webpack://webviewer-ui/./src/components/AnnotationContentOverlay/AnnotationContentOverlay.scss?2ec7"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport core from 'core';\r\nimport DataElements from 'constants/dataElement';\r\n\r\nconst FormFieldPlaceHolderOverlay = ({ annotation, overlayPosition, overlayRef }) => {\r\n  const [t] = useTranslation();\r\n\r\n  const formFieldCreationManager = core.getFormFieldCreationManager();\r\n  const formFieldPlaceHolderName = formFieldCreationManager.getFieldName(annotation);\r\n  const formFieldPlaceHolderType = annotation.getFormFieldPlaceholderType();\r\n\r\n  const mapPlaceHolderTypeToTranslation = (formFieldPlaceHolderType) => {\r\n    switch (formFieldPlaceHolderType) {\r\n      case 'TextFormField':\r\n        return 'formField.types.text';\r\n      case 'SignatureFormField':\r\n        return 'formField.types.signature';\r\n      case 'CheckBoxFormField':\r\n        return 'formField.types.checkbox';\r\n      case 'ListBoxFormField':\r\n        return 'formField.types.listbox';\r\n      case 'ComboBoxFormField':\r\n        return 'formField.types.combobox';\r\n      case 'RadioButtonFormField':\r\n        return 'formField.types.radio';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"Overlay AnnotationContentOverlay\"\r\n      data-element={DataElements.ANNOTATION_CONTENT_OVERLAY}\r\n      style={{ ...overlayPosition }}\r\n      ref={overlayRef}\r\n    >\r\n      <div>\r\n        <span style={{ 'fontWeight': 'bold' }}>{t('formField.type')}: </span>\r\n        {t(mapPlaceHolderTypeToTranslation(formFieldPlaceHolderType))}\r\n      </div>\r\n      <div>\r\n        <span style={{ 'fontWeight': 'bold' }}>{t('formField.formFieldPopup.fieldName')}: </span>\r\n        {formFieldPlaceHolderName}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FormFieldPlaceHolderOverlay;","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useSelector, shallowEqual } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport PropTypes from 'prop-types';\r\nimport core from 'core';\r\nimport selectors from 'selectors';\r\n\r\nimport { isMobileDevice } from 'helpers/device';\r\nimport DataElements from 'constants/dataElement';\r\nimport CustomElement from '../CustomElement';\r\nimport FormFieldPlaceHolderOverlay from './FormFieldPlaceHolderOverlay';\r\nimport './AnnotationContentOverlay.scss';\r\n\r\nconst MAX_CHARACTERS = 100;\r\n\r\nconst propTypes = {\r\n  annotation: PropTypes.object,\r\n  clientXY: PropTypes.object,\r\n};\r\n\r\nconst AnnotationContentOverlay = ({ annotation, clientXY }) => {\r\n  const [\r\n    isDisabled,\r\n    isOverlayOpen,\r\n    // Clients have the option to customize how the tooltip is rendered by passing a handler\r\n    customHandler,\r\n  ] = useSelector((state) => [\r\n    selectors.isElementDisabled(state, DataElements.ANNOTATION_CONTENT_OVERLAY),\r\n    selectors.isElementOpen(state, DataElements.ANNOTATION_CONTENT_OVERLAY),\r\n    selectors.getAnnotationContentOverlayHandler(state),\r\n  ], shallowEqual);\r\n\r\n  const [t] = useTranslation();\r\n  const [overlayPosition, setOverlayPosition] = useState({\r\n    left: 0,\r\n    top: 0,\r\n  });\r\n\r\n  const isUsingCustomHandler = customHandler !== null;\r\n  const overlayRef = useRef(null);\r\n  const contents = annotation?.getContents();\r\n  // the gap between the component and the mouse, to make sure that the mouse won't be on component element\r\n  // so that the underlying annotation will always be hovered\r\n  const gap = 20;\r\n\r\n  useEffect(() => {\r\n    const fitWindowSize = (clientX, clientY, left, top) => {\r\n      const overlayRect = overlayRef.current.getBoundingClientRect();\r\n\r\n      if (left + overlayRect.width > window.innerWidth) {\r\n        left = clientX - overlayRect.width - gap;\r\n      }\r\n\r\n      if (top + overlayRect.height > window.innerHeight) {\r\n        top = clientY - overlayRect.height - gap;\r\n      }\r\n\r\n      if (top <= 0) {\r\n        top = 0;\r\n      }\r\n\r\n      return { left, top };\r\n    };\r\n\r\n    if (overlayRef.current && annotation) {\r\n      const { clientX, clientY } = clientXY;\r\n      const { left, top } = fitWindowSize(clientX, clientY, clientX + gap, clientY + gap);\r\n      setOverlayPosition({ left, top });\r\n    }\r\n  }, [annotation, clientXY]);\r\n\r\n  const numberOfReplies = annotation?.getReplies().length;\r\n\r\n  const preRenderedElements = isUsingCustomHandler && annotation ? customHandler(annotation) : null;\r\n\r\n  const customRender = useCallback(() => preRenderedElements, [preRenderedElements]);\r\n\r\n  const renderContents = () => (\r\n    <div\r\n      className=\"Overlay AnnotationContentOverlay\"\r\n      data-element={DataElements.ANNOTATION_CONTENT_OVERLAY}\r\n      style={{ ...overlayPosition }}\r\n      ref={overlayRef}\r\n    >\r\n      <div className=\"author\">{core.getDisplayAuthor(annotation['Author'])}</div>\r\n      <div className=\"contents\">\r\n        {contents.length > MAX_CHARACTERS\r\n          ? `${contents.slice(0, MAX_CHARACTERS)}...`\r\n          : contents}\r\n      </div>\r\n      {numberOfReplies > 0 && (\r\n        <div className=\"replies\">\r\n          {t('message.annotationReplyCount', { count: numberOfReplies })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  if (isDisabled || isMobileDevice || !annotation) {\r\n    return null;\r\n  }\r\n\r\n  if (isUsingCustomHandler && isOverlayOpen && preRenderedElements !== undefined) {\r\n    if (preRenderedElements) {\r\n      return (\r\n        <div\r\n          className=\"Overlay AnnotationContentOverlay\"\r\n          data-element={DataElements.ANNOTATION_CONTENT_OVERLAY}\r\n          style={{ ...overlayPosition }}\r\n          ref={overlayRef}\r\n        >\r\n          <CustomElement render={customRender} />\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  if (annotation.isFormFieldPlaceholder() && isOverlayOpen) {\r\n    return (\r\n      <FormFieldPlaceHolderOverlay\r\n        annotation={annotation}\r\n        overlayPosition={overlayPosition}\r\n        overlayRef={overlayRef}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (contents && isOverlayOpen) {\r\n    return renderContents();\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nAnnotationContentOverlay.propTypes = propTypes;\r\n\r\nexport default AnnotationContentOverlay;\r\n","import AnnotationContentOverlay from './AnnotationContentOverlay';\r\n\r\nexport default AnnotationContentOverlay;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".open.AnnotationContentOverlay{visibility:visible}.closed.AnnotationContentOverlay{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.AnnotationContentOverlay{word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.always-hide{display:none}.AnnotationContentOverlay{position:absolute;z-index:95;border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background);display:flex;flex-direction:column;max-width:215px;padding:8px}.AnnotationContentOverlay .author{font-weight:700}.AnnotationContentOverlay .contents,.AnnotationContentOverlay .replies{margin-top:5px;white-space:pre-wrap}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ruleSet[1].rules[1].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./AnnotationContentOverlay.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                function findNestedWebComponents(tagName, root = document) {\r\n                  const elements = [];\r\n\r\n                  // Check direct children\r\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\r\n\r\n                  // Check shadow DOMs\r\n                  root.querySelectorAll('*').forEach(el => {\r\n                    if (el.shadowRoot) {\r\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\r\n                    }\r\n                  });\r\n\r\n                  return elements;\r\n                }\r\n                if (!window.isApryseWebViewerWebComponent) {\r\n                  document.head.appendChild(styleTag);\r\n                  return;\r\n                }\r\n\r\n                let webComponents;\r\n                // First we see if the webcomponent is at the document level\r\n                webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                // If not, we check have to check if it is nested in another webcomponent\r\n                if (!webComponents.length) {\r\n                  webComponents = findNestedWebComponents('apryse-webviewer');\r\n                }\r\n                // Now we append the style tag to each webcomponent\r\n                const clonedStyleTags = [];\r\n                for (let i = 0; i < webComponents.length; i++) {\r\n                  const webComponent = webComponents[i];\r\n                  if (i === 0) {\r\n                    webComponent.shadowRoot.appendChild(styleTag);\r\n                    styleTag.onload = function () {\r\n                      if (clonedStyleTags.length > 0) {\r\n                        clonedStyleTags.forEach((styleNode) => {\r\n                          // eslint-disable-next-line no-unsanitized/property\r\n                          styleNode.innerHTML = styleTag.innerHTML;\r\n                        });\r\n                      }\r\n                    };\r\n                  } else {\r\n                    const styleNode = styleTag.cloneNode(true);\r\n                    webComponent.shadowRoot.appendChild(styleNode);\r\n                    clonedStyleTags.push(styleNode);\r\n                  }\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"names":["_ref","annotation","overlayPosition","overlayRef","t","useTranslation","formFieldPlaceHolderName","core","getFormFieldCreationManager","getFieldName","formFieldPlaceHolderType","getFormFieldPlaceholderType","React","className","DataElements","ANNOTATION_CONTENT_OVERLAY","style","_objectSpread","ref","mapPlaceHolderTypeToTranslation","propTypes","PropTypes","clientXY","AnnotationContentOverlay","_useSelector2","_slicedToArray","useSelector","state","selectors","isElementDisabled","isElementOpen","getAnnotationContentOverlayHandler","shallowEqual","isDisabled","isOverlayOpen","customHandler","_useState2","useState","left","top","setOverlayPosition","isUsingCustomHandler","useRef","contents","getContents","useEffect","current","clientX","clientY","_fitWindowSize","overlayRect","getBoundingClientRect","width","window","innerWidth","height","innerHeight","fitWindowSize","numberOfReplies","getReplies","length","preRenderedElements","customRender","useCallback","isMobileDevice","undefined","CustomElement","render","isFormFieldPlaceholder","FormFieldPlaceHolderOverlay","getDisplayAuthor","concat","slice","count","exports","___CSS_LOADER_API_IMPORT___","push","module","id","locals","api","content","__esModule","default","options","styleTag","isApryseWebViewerWebComponent","document","head","appendChild","webComponents","getElementsByTagName","findNestedWebComponents","tagName","root","elements","querySelectorAll","forEach","el","shadowRoot","clonedStyleTags","i","webComponent","onload","styleNode","innerHTML","cloneNode"],"sourceRoot":""}