{"version":3,"file":"chunks/3400.chunk.js","mappings":"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","sources":["webpack://webviewer-ui/./src/helpers/getRichTextPopupPosition.js","webpack://webviewer-ui/./src/components/MathSymbolsPicker/MathSymbolsPicker.js","webpack://webviewer-ui/./src/components/MathSymbolsPicker/index.js","webpack://webviewer-ui/./src/components/RichTextPopup/RichTextPopup.js","webpack://webviewer-ui/./src/components/RichTextPopup/index.js","webpack://webviewer-ui/./src/components/MathSymbolsPicker/MathSymbolsPicker.scss","webpack://webviewer-ui/./src/components/RichTextPopup/RichTextPopup.scss","webpack://webviewer-ui/./src/components/MathSymbolsPicker/MathSymbolsPicker.scss?a94e","webpack://webviewer-ui/./src/components/RichTextPopup/RichTextPopup.scss?bf2b"],"sourcesContent":["import { calcPopupLeft, calcPopupTop } from 'helpers/getPopupPosition';\r\nimport core from 'core';\r\nimport getRootNode from 'helpers/getRootNode';\r\n\r\nexport default (annotation, popup) => {\r\n  if (!popup || !popup.current) {\r\n    return;\r\n  }\r\n  const editorContainer = getRootNode().querySelector(\r\n    `#pageWidgetContainer${annotation.PageNumber} [id=\"freetext-editor-${annotation.Id}\"]`\r\n  );\r\n\r\n  if (!editorContainer) {\r\n    return;\r\n  }\r\n  const scrollContainer = core.getScrollViewElement();\r\n  const padding = 2 * parseFloat(annotation.StrokeThickness) * core.getZoom();\r\n  const cBox = editorContainer.getBoundingClientRect();\r\n  const cInfo = {\r\n    topLeft: {\r\n      x: cBox.left + scrollContainer.scrollLeft - padding,\r\n      y: cBox.top + scrollContainer.scrollTop - padding\r\n    },\r\n    bottomRight: {\r\n      x: cBox.right + scrollContainer.scrollLeft + padding,\r\n      y: cBox.bottom + scrollContainer.scrollTop + padding\r\n    }\r\n  };\r\n  const pBox = popup.current.getBoundingClientRect();\r\n  return {\r\n    left: calcPopupLeft(cInfo, pBox),\r\n    top: calcPopupTop(cInfo, pBox)\r\n  };\r\n};\r\n","import React from 'react';\r\n\r\nimport './MathSymbolsPicker.scss';\r\n\r\nconst symbols = [\r\n  '\\u002B',\r\n  '\\u2212',\r\n  '\\u00D7',\r\n  '\\u00F7',\r\n  '\\u003D',\r\n  '\\u2260',\r\n  '\\u00B1',\r\n  '\\u00AC',\r\n  '\\u003C',\r\n  '\\u003E',\r\n  '\\u22DC',\r\n  '\\u22DD',\r\n  '\\u00B0',\r\n  '\\u00B9',\r\n  '\\u00B2',\r\n  '\\u00B3',\r\n  '\\u0192',\r\n  '\\u0025',\r\n  '\\u2030',\r\n  '\\u2031',\r\n  '\\u2200',\r\n  '\\u2201',\r\n  '\\u2202',\r\n  '\\u2203',\r\n  '\\u2204',\r\n  '\\u2205',\r\n  '\\u2206',\r\n  '\\u2207',\r\n  '\\u2208',\r\n  '\\u2209',\r\n  '\\u220A',\r\n  '\\u220B',\r\n  '\\u220C',\r\n  '\\u220D',\r\n  '\\u220E',\r\n  '\\u220F',\r\n  '\\u2210',\r\n  '\\u2211',\r\n  '\\u2213',\r\n  '\\u2214',\r\n  '\\u2215',\r\n  '\\u2216',\r\n  '\\u2217',\r\n  '\\u2218',\r\n  '\\u2219',\r\n  '\\u221A',\r\n  '\\u221B',\r\n  '\\u221C',\r\n  '\\u221D',\r\n  '\\u221E',\r\n  '\\u221F',\r\n  '\\u2220',\r\n  '\\u2221',\r\n  '\\u2222',\r\n  '\\u2223',\r\n  '\\u2224',\r\n  '\\u2225',\r\n  '\\u2226',\r\n  '\\u2227',\r\n  '\\u2228',\r\n  '\\u2229',\r\n  '\\u222A',\r\n  '\\u222B',\r\n  '\\u222C',\r\n  '\\u222D',\r\n  '\\u222E',\r\n  '\\u222F',\r\n  '\\u2230',\r\n  '\\u2231',\r\n  '\\u2232',\r\n  '\\u2233',\r\n  '\\u2234',\r\n  '\\u2235',\r\n  '\\u2236',\r\n  '\\u2237',\r\n  '\\u2238',\r\n  '\\u2239',\r\n  '\\u223A',\r\n  '\\u223B',\r\n  '\\u223C',\r\n  '\\u223D',\r\n  '\\u223E',\r\n  '\\u223F',\r\n  '\\u2240',\r\n  '\\u2241',\r\n  '\\u2242',\r\n  '\\u2243',\r\n  '\\u2244',\r\n  '\\u2245',\r\n  '\\u2246',\r\n  '\\u2247',\r\n  '\\u2248',\r\n  '\\u2249',\r\n  '\\u224A',\r\n  '\\u224B',\r\n  '\\u224C'\r\n];\r\n\r\nconst MathSymbolsPicker = ({ onClickHandler, maxHeight }) => {\r\n  return (\r\n    <div\r\n      className=\"mathSymbolsContainer padding\"\r\n      style={{ maxHeight: `${maxHeight}px` }}\r\n    >\r\n      {symbols.map((symbol, i) => (\r\n        <button\r\n          key={i}\r\n          className=\"cell-container\"\r\n          onClick={() => {\r\n            onClickHandler(symbol);\r\n          }}\r\n        >\r\n          {symbol}\r\n        </button>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MathSymbolsPicker;","import MathSymbolsPicker from './MathSymbolsPicker';\r\n\r\nexport default MathSymbolsPicker;","import React, { useState, useEffect, useRef, useLayoutEffect } from 'react';\r\nimport Draggable from 'react-draggable';\r\nimport classNames from 'classnames';\r\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\r\nimport debounce from 'lodash/debounce';\r\nimport PropTypes from 'prop-types';\r\nimport Element from 'components/Element';\r\nimport ColorPalette from 'components/ColorPalette';\r\nimport Button from 'components/Button';\r\nimport HorizontalDivider from 'components/HorizontalDivider';\r\nimport { isMobile } from 'helpers/device';\r\nimport core from 'core';\r\nimport getRichTextPopupPosition from 'helpers/getRichTextPopupPosition';\r\nimport adjustFreeTextBoundingBox from 'helpers/adjustFreeTextBoundingBox';\r\nimport MathSymbolsPicker from '../MathSymbolsPicker';\r\nimport ColorPalettePicker from 'components/ColorPalettePicker';\r\n\r\nimport actions from 'actions';\r\nimport selectors from 'selectors';\r\n\r\nimport './RichTextPopup.scss';\r\nimport DataElements from 'constants/dataElement';\r\nimport i18next from 'i18next';\r\nimport Icon from 'components/Icon';\r\nimport TextStylePicker from 'components/TextStylePicker';\r\nimport handleFreeTextAutoSizeToggle from 'src/helpers/handleFreeTextAutoSizeToggle';\r\n\r\nconst propTypes = {\r\n  annotation: PropTypes.object,\r\n  editor: PropTypes.object,\r\n};\r\n\r\nconst RichTextPopup = ({ annotation, editor }) => {\r\n  const [\r\n    isDisabled,\r\n    isOpen,\r\n    isPaletteDisabled,\r\n    customColors,\r\n    isInDesktopOnlyMode,\r\n    isTextStylePickerOpen,\r\n    isColorPickerOpen,\r\n    fonts,\r\n    legacyPopup,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.isElementDisabled(state, DataElements.RICH_TEXT_POPUP),\r\n      selectors.isElementOpen(state, DataElements.RICH_TEXT_POPUP),\r\n      selectors.isElementDisabled(state, 'colorPalette'),\r\n      selectors.getCustomColors(state, 'customColors'),\r\n      selectors.isInDesktopOnlyMode(state),\r\n      selectors.isElementOpen(state, DataElements.STYLE_POPUP_TEXT_STYLE_CONTAINER),\r\n      selectors.isElementOpen(state, DataElements.STYLE_POPUP_COLORS_CONTAINER),\r\n      selectors.getFonts(state),\r\n      !selectors.isElementDisabled(state, DataElements.LEGACY_RICH_TEXT_POPUP),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n  const [symbolsVisible, setSymbolsVisible] = useState(false);\r\n  const [cssPosition, setCssPosition] = useState({ left: 0, top: 0 });\r\n  const [draggablePosition, setDraggablePosition] = useState({ x: 0, y: 0 });\r\n  const [format, setFormat] = useState({});\r\n  const popupRef = useRef(null);\r\n  const editorRef = useRef(null);\r\n  const annotationRef = useRef(null);\r\n  const propertiesRef = useRef({});\r\n  const dispatch = useDispatch();\r\n  const oldSelectionRef = useRef();\r\n  const symbolsAreaHeight = 150; // max height for the math symbols area\r\n  const [isAutoSizeFont, setAutoSizeFont] = useState(annotation.isAutoSizeFont());\r\n\r\n  useEffect(() => {\r\n    // Have to disable instead of closing because annotation popup will reopen itself\r\n    dispatch(actions.disableElements([DataElements.ANNOTATION_STYLE_POPUP]));\r\n    dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\r\n    return () => {\r\n      dispatch(actions.enableElements([DataElements.ANNOTATION_STYLE_POPUP]));\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleSelectionChange = (range, oldRange) => {\r\n      const shouldRestoreLostSelection = !range && oldRange && editorRef.current;\r\n      if (shouldRestoreLostSelection) {\r\n        editorRef.current.setSelection(oldRange.index, oldRange.length);\r\n      }\r\n      if (range && editorRef.current) {\r\n        setFormat(getFormat(range));\r\n      }\r\n    };\r\n    const handleTextChange = () => {\r\n      if (annotationRef.current?.isAutoSized() && popupRef.current) {\r\n        const position = getRichTextPopupPosition(\r\n          annotationRef.current,\r\n          popupRef,\r\n        );\r\n        setCssPosition(position);\r\n      }\r\n\r\n      setFormat(getFormat(editorRef.current?.getSelection()));\r\n    };\r\n    core.addEventListener('editorSelectionChanged', handleSelectionChange);\r\n    core.addEventListener('editorTextChanged', handleTextChange);\r\n    return () => {\r\n      core.removeEventListener('editorSelectionChanged', handleSelectionChange);\r\n      core.removeEventListener('editorTextChanged', handleTextChange);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // when the editor is focused, we want to reset any previous drag movements so that\r\n    // the popup will be positioned centered to the editor\r\n    setDraggablePosition({ x: 0, y: 0 });\r\n\r\n    editorRef.current = editor;\r\n    annotationRef.current = annotation;\r\n    let StrokeStyle = 'solid';\r\n    try {\r\n      StrokeStyle = (annotation['Style'] === 'dash')\r\n        ? `${annotation['Style']},${annotation['Dashes']}`\r\n        : annotation['Style'];\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n    const richTextStyles = annotation.getRichTextStyle();\r\n    const stylesTemp = richTextStyles[0];\r\n    propertiesRef.current = {\r\n      Font: annotation.Font,\r\n      FontSize: annotation.FontSize,\r\n      TextAlign: annotation.TextAlign,\r\n      TextVerticalAlign: annotation.TextVerticalAlign,\r\n      bold: stylesTemp?.['font-weight'] === 'bold' ?? false,\r\n      italic: stylesTemp?.['font-style'] === 'italic' ?? false,\r\n      underline: stylesTemp?.['text-decoration']?.includes('underline') || stylesTemp?.['text-decoration']?.includes('word'),\r\n      strikeout: stylesTemp?.['text-decoration']?.includes('line-through') ?? false,\r\n      size: stylesTemp?.['font-size'],\r\n      font: stylesTemp?.['font-family'],\r\n      StrokeStyle,\r\n      calculatedFontSize: annotation.getCalculatedFontSize()\r\n    };\r\n\r\n    setFormat(getFormat(editorRef.current?.getSelection()));\r\n\r\n    if (oldSelectionRef.current) {\r\n      editorRef.current.setSelection(oldSelectionRef.current);\r\n      oldSelectionRef.current = null;\r\n    }\r\n  }, [annotation, editor]);\r\n\r\n  useEffect(() => {\r\n    const handleEditorBlur = () => {\r\n      dispatch(actions.closeElements([DataElements.RICH_TEXT_POPUP]));\r\n      editorRef.current = null;\r\n      annotationRef.current = null;\r\n    };\r\n    core.addEventListener('editorBlur', handleEditorBlur);\r\n    return () => {\r\n      core.removeEventListener('editorBlur', handleEditorBlur);\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const setPopupPosition = () => {\r\n    if (popupRef.current) {\r\n      const position = getRichTextPopupPosition(\r\n        annotation,\r\n        popupRef,\r\n      );\r\n      setCssPosition(position);\r\n    }\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    setPopupPosition();\r\n  }, [annotation]);\r\n\r\n  // useLayoutEffect so the popup can adjust position smoothly without flashing\r\n  useLayoutEffect(() => {\r\n    const setPosition = debounce(() => {\r\n      if (popupRef.current) {\r\n        setPopupPosition();\r\n      }\r\n    }, 100);\r\n\r\n    const scrollViewElement = core.getDocumentViewer().getScrollViewElement();\r\n    scrollViewElement?.addEventListener('scroll', setPosition);\r\n\r\n    return () => scrollViewElement?.removeEventListener('scroll', setPosition);\r\n\r\n    // The popup position should be updated when the math symbols are visible or hidden\r\n  }, [annotation, symbolsVisible]);\r\n\r\n  const getFormat = (range) => {\r\n    if (!range) {\r\n      return {};\r\n    }\r\n\r\n    const format = editorRef.current.getFormat(range.index, range.length);\r\n\r\n    if (typeof format.color === 'string') {\r\n      format.color = new window.Core.Annotations.Color(format.color);\r\n    } else if (Array.isArray(format.color)) {\r\n      // the selection contains multiple color, so we set the current color to the last selected color\r\n      const lastSelectedColor = new window.Core.Annotations.Color(format.color[format.color.length - 1]);\r\n      format.color = lastSelectedColor;\r\n    } else if (!format.color) {\r\n      format.color = annotationRef.current.TextColor;\r\n    }\r\n\r\n    return format;\r\n  };\r\n\r\n  const handleTextFormatChange = (format) => () => {\r\n    let { index, length } = editorRef.current.getSelection();\r\n    if (length === 0) {\r\n      oldSelectionRef.current = { index, length };\r\n      const newSelection = editorRef.current.getSelection();\r\n      index = newSelection.index;\r\n      length = newSelection.length;\r\n    }\r\n\r\n    const currentFormat = editorRef.current.getFormat(index, length);\r\n    applyFormat(format, !currentFormat[format]);\r\n  };\r\n\r\n  const handleSymbolsClick = () => {\r\n    setSymbolsVisible(!symbolsVisible);\r\n  };\r\n\r\n  const handleColorChange = (_, color) => {\r\n    applyFormat('color', color.toHexString());\r\n  };\r\n\r\n  const applyFormat = (formatKey, value) => {\r\n    if (formatKey === 'size') {\r\n      editorRef.current?.format('applyCustomFontSize', value);\r\n    } else {\r\n      editorRef.current?.format(formatKey, value);\r\n    }\r\n\r\n    if (formatKey === 'color') {\r\n      value = new window.Core.Annotations.Color(value);\r\n    }\r\n\r\n    if (core.isFullPDFEnabled() && formatKey === 'font') {\r\n      const updated = {\r\n        ...format,\r\n        'original-font-family': value\r\n      };\r\n      return setFormat(updated);\r\n    }\r\n    // format the entire editor doesn't trigger the editorTextChanged event, so we set the format state here\r\n    setFormat({\r\n      ...format,\r\n      [formatKey]: value\r\n    });\r\n  };\r\n\r\n  const syncDraggablePosition = (e, { x, y }) => {\r\n    setDraggablePosition({ x, y });\r\n  };\r\n\r\n  const insertSymbols = (symbol) => {\r\n    const { index, length } = editorRef.current.getSelection();\r\n    // if user selected some text, then we want to first delete the selected content\r\n    if (length > 0) {\r\n      editorRef.current.deleteText(index, length);\r\n    }\r\n    // insert symbol at the selected index\r\n    editorRef.current.insertText(index, symbol);\r\n    editorRef.current.setSelection(index + 1);\r\n  };\r\n\r\n  const menuItems = {\r\n    [DataElements.STYLE_POPUP_TEXT_STYLE_CONTAINER]: isTextStylePickerOpen,\r\n    [DataElements.STYLE_POPUP_COLORS_CONTAINER]: isColorPickerOpen,\r\n  };\r\n  const toggleMenuItem = (dataElement) => {\r\n    if (!menuItems[dataElement]) {\r\n      dispatch(actions.openElement(dataElement));\r\n    } else {\r\n      dispatch(actions.closeElement(dataElement));\r\n    }\r\n  };\r\n  const openTextStyle = () => toggleMenuItem(DataElements.STYLE_POPUP_TEXT_STYLE_CONTAINER);\r\n  const openColors = () => toggleMenuItem(DataElements.STYLE_POPUP_COLORS_CONTAINER);\r\n\r\n  const onPropertyChange = (property, value) => {\r\n    const { index, length } = editorRef.current.getSelection();\r\n    const annotation = annotationRef.current;\r\n    annotation[property] = value;\r\n    editorRef.current.blur();\r\n    if (property === 'FontSize' || property === 'Font') {\r\n      adjustFreeTextBoundingBox(annotation);\r\n    }\r\n    setTimeout(() => {\r\n      oldSelectionRef.current = { index, length };\r\n      const editBoxManager = core.getAnnotationManager().getEditBoxManager();\r\n      editBoxManager.focusBox(annotation);\r\n    }, 0);\r\n  };\r\n\r\n  const onRichTextStyleChange = (property, value) => {\r\n    const propertyTranslation = {\r\n      'font-weight': 'bold',\r\n      'font-style': 'italic',\r\n      'underline': 'underline',\r\n      'line-through': 'strike',\r\n      'font-family': 'font',\r\n      'font-size': 'size',\r\n    };\r\n    if (property === 'font-family' || property === 'font-size') {\r\n      applyFormat(propertyTranslation[property], value);\r\n      const annotation = annotationRef.current;\r\n      if (annotation.isAutoSized()) {\r\n        const editBoxManager = core.getAnnotationManager().getEditBoxManager();\r\n        editBoxManager.resizeAnnotation(annotation);\r\n      }\r\n    } else {\r\n      handleTextFormatChange(propertyTranslation[property])();\r\n    }\r\n  };\r\n\r\n\r\n  propertiesRef.current.bold = format.bold;\r\n  propertiesRef.current.italic = format.italic;\r\n  propertiesRef.current.underline = format.underline;\r\n  propertiesRef.current.strikeout = format.strike;\r\n  propertiesRef.current.quillFont = format['original-font-family'] || format.font || propertiesRef.current.Font;\r\n  propertiesRef.current.quillFontSize = format.originalSize || propertiesRef.current.FontSize;\r\n\r\n  // TODO for now don't show it in mobile\r\n  return isDisabled || (isMobile() && !isInDesktopOnlyMode) ? null : (\r\n    <Draggable\r\n      position={draggablePosition}\r\n      onDrag={syncDraggablePosition}\r\n      onStop={syncDraggablePosition}\r\n      enableUserSelectHack={false}\r\n      // don't allow drag when clicking on a button element or a color cell\r\n      cancel=\".Button, .cell, .mathSymbolsContainer, .Dropdown, .Dropdown__item\"\r\n      // prevent the blur event from being triggered when clicking on toolbar buttons\r\n      // otherwise we can't style the text since a blur event is triggered before a click event\r\n      onMouseDown={(e) => {\r\n        if (e.type !== 'touchstart') {\r\n          e.preventDefault();\r\n        }\r\n      }}\r\n    >\r\n      <div\r\n        className={classNames({\r\n          Popup: true,\r\n          RichTextPopup: true,\r\n          open: isOpen,\r\n          closed: !isOpen,\r\n          legacy: legacyPopup,\r\n        })}\r\n        ref={popupRef}\r\n        data-element={DataElements.RICH_TEXT_POPUP}\r\n        style={{ ...cssPosition }}\r\n      >\r\n        {\r\n          legacyPopup ? (<>\r\n            <Element className=\"rich-text-format-legacy\" dataElement=\"richTextFormats\">\r\n              <Button\r\n                isActive={format.bold}\r\n                dataElement=\"richTextBoldButton\"\r\n                onClick={handleTextFormatChange('bold')}\r\n                img=\"icon-text-bold\"\r\n                title=\"option.richText.bold\"\r\n              />\r\n              <Button\r\n                isActive={format.italic}\r\n                dataElement=\"richTextItalicButton\"\r\n                onClick={handleTextFormatChange('italic')}\r\n                img=\"icon-text-italic\"\r\n                title=\"option.richText.italic\"\r\n              />\r\n              <Button\r\n                isActive={format.underline}\r\n                dataElement=\"richTextUnderlineButton\"\r\n                onClick={handleTextFormatChange('underline')}\r\n                img=\"ic_annotation_underline_black_24px\"\r\n                title=\"option.richText.underline\"\r\n              />\r\n              <Button\r\n                isActive={format.strike}\r\n                dataElement=\"richTextStrikeButton\"\r\n                onClick={handleTextFormatChange('strike')}\r\n                img=\"ic_annotation_strikeout_black_24px\"\r\n                title=\"option.richText.strikeout\"\r\n              />\r\n              <Button\r\n                dataElement=\"mathSymbolsButton\"\r\n                onClick={handleSymbolsClick}\r\n                img=\"ic_thumbnails_grid_black_24px\"\r\n                title=\"option.mathSymbols\"\r\n              />\r\n            </Element>\r\n            <HorizontalDivider style={{ paddingTop: 0 }} />\r\n          </>) :\r\n            (<>\r\n              <div className=\"collapsible-menu\" onClick={openTextStyle} onTouchStart={openTextStyle} role={'toolbar'}>\r\n                <div className=\"menu-title\">\r\n                  {i18next.t('option.stylePopup.textStyle')}\r\n                </div>\r\n                <Icon glyph={`icon-chevron-${isTextStylePickerOpen ? 'up' : 'down'}`} />\r\n              </div>\r\n              {isTextStylePickerOpen && (\r\n                <div className=\"menu-items\">\r\n                  <TextStylePicker\r\n                    fonts={fonts}\r\n                    onPropertyChange={onPropertyChange}\r\n                    onRichTextStyleChange={onRichTextStyleChange}\r\n                    properties={propertiesRef.current}\r\n                    stateless={true}\r\n                    isFreeText={true}\r\n                    onFreeTextSizeToggle={() => handleFreeTextAutoSizeToggle(annotation, setAutoSizeFont, isAutoSizeFont)}\r\n                    isFreeTextAutoSize={isAutoSizeFont}\r\n                    isRichTextEditMode={true}\r\n                  />\r\n                </div>\r\n              )}\r\n              <div className=\"divider\" />\r\n              {!isPaletteDisabled &&\r\n                <div className=\"collapsible-menu\" onClick={openColors} onTouchStart={openColors} role={'toolbar'}>\r\n                  <div className=\"menu-title\">\r\n                    {i18next.t('option.stylePopup.colors')}\r\n                  </div>\r\n                  <Icon glyph={`icon-chevron-${isColorPickerOpen ? 'up' : 'down'}`} />\r\n                </div>\r\n              }\r\n            </>\r\n            )}\r\n        {!isPaletteDisabled && (legacyPopup || isColorPickerOpen) && (\r\n          <>\r\n            <ColorPalette\r\n              colorMapKey=\"freeText\"\r\n              color={format.color}\r\n              property=\"TextColor\"\r\n              onStyleChange={handleColorChange}\r\n              hasPadding\r\n            />\r\n            {customColors.length > 0 && (\r\n              <ColorPalettePicker\r\n                color={format.color}\r\n                property=\"TextColor\"\r\n                onStyleChange={handleColorChange}\r\n                enableEdit={false}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n        {symbolsVisible && <MathSymbolsPicker onClickHandler={insertSymbols} maxHeight={symbolsAreaHeight} />}\r\n      </div>\r\n    </Draggable>\r\n  );\r\n};\r\n\r\nRichTextPopup.propTypes = propTypes;\r\n\r\nexport default React.memo(RichTextPopup);\r\n","import RichTextPopup from './RichTextPopup';\r\n\r\nexport default RichTextPopup;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.mathSymbolsContainer{display:flex;flex-wrap:wrap;overflow-y:auto;display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:5px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.mathSymbolsContainer{width:196px}}.mathSymbolsContainer.padding{padding:4px 20px 8px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .mathSymbolsContainer{max-width:450px;width:auto}}@media(max-width:640px)and (-ms-high-contrast:active),(max-width:640px)and (-ms-high-contrast:none){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .mathSymbolsContainer{width:308px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .mathSymbolsContainer{max-width:450px;width:auto}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.App.is-web-component:not(.is-in-desktop-only-mode) .mathSymbolsContainer{width:308px}}}.mathSymbolsContainer .cell-container{padding:0;border:none;background-color:transparent;flex:1 0 14%;cursor:pointer;border-radius:4px;width:28px;height:28px;display:flex;align-items:center;justify-content:center}:host(:not([data-tabbing=true])) .mathSymbolsContainer .cell-container,html:not([data-tabbing=true]) .mathSymbolsContainer .cell-container{outline:none}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .mathSymbolsContainer .cell-container{width:44px;height:44px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .mathSymbolsContainer .cell-container{width:44px;height:44px}}.mathSymbolsContainer .cell-container:hover{background:var(--popup-button-hover)}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".open.RichTextPopup{visibility:visible}.closed.RichTextPopup{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.RichTextPopup{position:absolute;z-index:70;display:flex;justify-content:center;align-items:center}.RichTextPopup:empty{padding:0}.RichTextPopup .buttons{display:flex}.RichTextPopup .Button{margin:4px;width:32px;height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RichTextPopup .Button{width:42px;height:42px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .RichTextPopup .Button{width:42px;height:42px}}.RichTextPopup .Button:hover{background:var(--popup-button-hover)}.RichTextPopup .Button .Icon{width:18px;height:18px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RichTextPopup .Button .Icon{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .RichTextPopup .Button .Icon{width:24px;height:24px}}.is-vertical.RichTextPopup .Button.main-menu-button{width:100%;border-radius:0;justify-content:flex-start;padding-left:var(--padding-small);padding-right:var(--padding-small);margin:0 0 var(--padding-tiny) 0}.is-vertical.RichTextPopup .Button.main-menu-button:first-child{margin-top:var(--padding-tiny)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .is-vertical.RichTextPopup .Button.main-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .is-vertical.RichTextPopup .Button.main-menu-button{width:100%;height:32px}}.is-vertical.RichTextPopup .Button.main-menu-button .Icon{margin-right:10px}.is-vertical.RichTextPopup .Button.main-menu-button span{white-space:nowrap}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.RichTextPopup{overflow:visible;flex-direction:column;background:var(--component-background);border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);width:220px;padding:6px 12px;align-items:flex-start}.RichTextPopup.legacy{padding:0;width:auto;align-items:center}.RichTextPopup.legacy .ColorPalette.padding{padding:4px 12px 8px}.RichTextPopup.legacy .colorPicker{padding:0 12px 8px}.RichTextPopup .rich-text-format-legacy{display:flex;width:100%;justify-content:center}.RichTextPopup .ColorPalette.padding{padding:0}.RichTextPopup .menu-items{width:100%;padding:6px 4px}.RichTextPopup .collapsible-menu{width:100%;display:flex;cursor:pointer;align-items:center;justify-content:space-between}.RichTextPopup .collapsible-menu .menu-title{padding-left:4px;padding-top:6px;padding-bottom:6px;font-weight:700;font-size:14px}.RichTextPopup .collapsible-menu .Icon{height:18px;width:18px}.RichTextPopup .divider{background-color:var(--divider);width:100%;height:1px;margin:6px 0}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ruleSet[1].rules[1].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./MathSymbolsPicker.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                function findNestedWebComponents(tagName, root = document) {\r\n                  const elements = [];\r\n\r\n                  // Check direct children\r\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\r\n\r\n                  // Check shadow DOMs\r\n                  root.querySelectorAll('*').forEach(el => {\r\n                    if (el.shadowRoot) {\r\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\r\n                    }\r\n                  });\r\n\r\n                  return elements;\r\n                }\r\n                if (!window.isApryseWebViewerWebComponent) {\r\n                  document.head.appendChild(styleTag);\r\n                  return;\r\n                }\r\n\r\n                let webComponents;\r\n                // First we see if the webcomponent is at the document level\r\n                webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                // If not, we check have to check if it is nested in another webcomponent\r\n                if (!webComponents.length) {\r\n                  webComponents = findNestedWebComponents('apryse-webviewer');\r\n                }\r\n                // Now we append the style tag to each webcomponent\r\n                const clonedStyleTags = [];\r\n                for (let i = 0; i < webComponents.length; i++) {\r\n                  const webComponent = webComponents[i];\r\n                  if (i === 0) {\r\n                    webComponent.shadowRoot.appendChild(styleTag);\r\n                    styleTag.onload = function () {\r\n                      if (clonedStyleTags.length > 0) {\r\n                        clonedStyleTags.forEach((styleNode) => {\r\n                          // eslint-disable-next-line no-unsanitized/property\r\n                          styleNode.innerHTML = styleTag.innerHTML;\r\n                        });\r\n                      }\r\n                    };\r\n                  } else {\r\n                    const styleNode = styleTag.cloneNode(true);\r\n                    webComponent.shadowRoot.appendChild(styleNode);\r\n                    clonedStyleTags.push(styleNode);\r\n                  }\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ruleSet[1].rules[1].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./RichTextPopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                function findNestedWebComponents(tagName, root = document) {\r\n                  const elements = [];\r\n\r\n                  // Check direct children\r\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\r\n\r\n                  // Check shadow DOMs\r\n                  root.querySelectorAll('*').forEach(el => {\r\n                    if (el.shadowRoot) {\r\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\r\n                    }\r\n                  });\r\n\r\n                  return elements;\r\n                }\r\n                if (!window.isApryseWebViewerWebComponent) {\r\n                  document.head.appendChild(styleTag);\r\n                  return;\r\n                }\r\n\r\n                let webComponents;\r\n                // First we see if the webcomponent is at the document level\r\n                webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                // If not, we check have to check if it is nested in another webcomponent\r\n                if (!webComponents.length) {\r\n                  webComponents = findNestedWebComponents('apryse-webviewer');\r\n                }\r\n                // Now we append the style tag to each webcomponent\r\n                const clonedStyleTags = [];\r\n                for (let i = 0; i < webComponents.length; i++) {\r\n                  const webComponent = webComponents[i];\r\n                  if (i === 0) {\r\n                    webComponent.shadowRoot.appendChild(styleTag);\r\n                    styleTag.onload = function () {\r\n                      if (clonedStyleTags.length > 0) {\r\n                        clonedStyleTags.forEach((styleNode) => {\r\n                          // eslint-disable-next-line no-unsanitized/property\r\n                          styleNode.innerHTML = styleTag.innerHTML;\r\n                        });\r\n                      }\r\n                    };\r\n                  } else {\r\n                    const styleNode = styleTag.cloneNode(true);\r\n                    webComponent.shadowRoot.appendChild(styleNode);\r\n                    clonedStyleTags.push(styleNode);\r\n                  }\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"names":["annotation","popup","current","editorContainer","getRootNode","querySelector","concat","PageNumber","Id","scrollContainer","core","getScrollViewElement","padding","parseFloat","StrokeThickness","getZoom","cBox","getBoundingClientRect","cInfo","topLeft","x","left","scrollLeft","y","top","scrollTop","bottomRight","right","bottom","pBox","calcPopupLeft","calcPopupTop","symbols","_ref","onClickHandler","maxHeight","React","className","style","map","symbol","i","key","onClick","propTypes","PropTypes","editor","RichTextPopup","_useSelector2","_slicedToArray","useSelector","state","selectors","isElementDisabled","DataElements","RICH_TEXT_POPUP","isElementOpen","getCustomColors","isInDesktopOnlyMode","STYLE_POPUP_TEXT_STYLE_CONTAINER","STYLE_POPUP_COLORS_CONTAINER","getFonts","LEGACY_RICH_TEXT_POPUP","shallowEqual","isDisabled","isOpen","isPaletteDisabled","customColors","isTextStylePickerOpen","isColorPickerOpen","fonts","legacyPopup","_useState2","useState","symbolsVisible","setSymbolsVisible","_useState4","cssPosition","setCssPosition","_useState6","draggablePosition","setDraggablePosition","_useState8","format","setFormat","popupRef","useRef","editorRef","annotationRef","propertiesRef","dispatch","useDispatch","oldSelectionRef","_useState10","isAutoSizeFont","setAutoSizeFont","useEffect","actions","disableElements","ANNOTATION_STYLE_POPUP","closeElement","ANNOTATION_POPUP","enableElements","handleSelectionChange","range","oldRange","setSelection","index","length","getFormat","handleTextChange","_annotationRef$curren","_editorRef$current","isAutoSized","position","getRichTextPopupPosition","getSelection","addEventListener","removeEventListener","_ref2","_ref3","_stylesTemp$textDeco","_stylesTemp$textDeco2","_stylesTemp$textDeco3","_stylesTemp$textDeco4","_editorRef$current2","StrokeStyle","err","console","error","stylesTemp","getRichTextStyle","Font","FontSize","TextAlign","TextVerticalAlign","bold","italic","underline","includes","strikeout","size","font","calculatedFontSize","getCalculatedFontSize","handleEditorBlur","closeElements","setPopupPosition","useLayoutEffect","setPosition","debounce","scrollViewElement","getDocumentViewer","color","window","Core","Annotations","Color","Array","isArray","lastSelectedColor","TextColor","handleTextFormatChange","_editorRef$current$ge","newSelection","currentFormat","applyFormat","handleColorChange","_","toHexString","formatKey","value","_editorRef$current3","_editorRef$current4","isFullPDFEnabled","updated","_objectSpread","_defineProperty","syncDraggablePosition","e","_ref4","menuItems","toggleMenuItem","dataElement","openElement","openTextStyle","openColors","strike","quillFont","quillFontSize","originalSize","isMobile","Draggable","onDrag","onStop","enableUserSelectHack","cancel","onMouseDown","type","preventDefault","classNames","Popup","open","closed","legacy","ref","Element","Button","isActive","img","title","HorizontalDivider","paddingTop","onTouchStart","role","i18next","t","Icon","glyph","TextStylePicker","onPropertyChange","property","_editorRef$current$ge3","blur","adjustFreeTextBoundingBox","setTimeout","getAnnotationManager","getEditBoxManager","focusBox","onRichTextStyleChange","propertyTranslation","resizeAnnotation","properties","stateless","isFreeText","onFreeTextSizeToggle","handleFreeTextAutoSizeToggle","isFreeTextAutoSize","isRichTextEditMode","ColorPalette","colorMapKey","onStyleChange","hasPadding","ColorPalettePicker","enableEdit","MathSymbolsPicker","_editorRef$current$ge2","deleteText","insertText","exports","___CSS_LOADER_API_IMPORT___","push","module","id","locals","api","content","__esModule","default","options","styleTag","isApryseWebViewerWebComponent","document","head","appendChild","webComponents","getElementsByTagName","findNestedWebComponents","tagName","root","elements","querySelectorAll","forEach","el","shadowRoot","clonedStyleTags","webComponent","onload","styleNode","innerHTML","cloneNode"],"sourceRoot":""}