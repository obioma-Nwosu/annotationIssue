{"version":3,"file":"chunks/954.chunk.js","mappings":"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","sources":["webpack://webviewer-ui/./src/helpers/evalFraction.js","webpack://webviewer-ui/./src/components/CalibrationModal/CalibrationModal.js","webpack://webviewer-ui/./src/components/CalibrationModal/index.js","webpack://webviewer-ui/./src/components/CalibrationModal/CalibrationModal.scss","webpack://webviewer-ui/./src/components/CalibrationModal/CalibrationModal.scss?a8cd"],"sourcesContent":["export default (fraction) => {\r\n  const [numerator, denominator] = fraction.split('/');\r\n  return Number(numerator) / Number(denominator);\r\n};\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport classNames from 'classnames';\r\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Button from 'components/Button';\r\nimport core from 'core';\r\nimport { mapAnnotationToKey } from 'constants/map';\r\nimport setToolStyles from 'helpers/setToolStyles';\r\nimport evalFraction from 'helpers/evalFraction';\r\nimport actions from 'actions';\r\nimport selectors from 'selectors';\r\nimport { Swipeable } from 'react-swipeable';\r\nimport DataElements from 'constants/dataElement';\r\n\r\nimport './CalibrationModal.scss';\r\n\r\nconst parseMeasurementContentsByAnnotation = (annotation) => {\r\n  const factor = annotation.Measure.axis[0].factor;\r\n  const unit = annotation.Scale[1][1];\r\n\r\n  switch (unit) {\r\n    case 'ft-in':\r\n      return (annotation.getLineLength() * factor / 12);\r\n    case 'in':\r\n    default:\r\n      return (annotation.getLineLength() * factor);\r\n  }\r\n};\r\n\r\nconst numberRegex = /^\\d*(\\.\\d*)?$/;\r\nconst fractionRegex = /^\\d*(\\s\\d\\/\\d*)$/;\r\nconst pureFractionRegex = /^(\\d\\/\\d*)*$/;\r\n\r\nconst CalibrationModal = () => {\r\n  const [isOpen, isDisabled, units] = useSelector(\r\n    (state) => [\r\n      selectors.isElementOpen(state, DataElements.CALIBRATION_MODAL),\r\n      selectors.isElementDisabled(state, DataElements.CALIBRATION_MODAL),\r\n      selectors.getMeasurementUnits(state),\r\n    ],\r\n    shallowEqual\r\n  );\r\n  const dispatch = useDispatch();\r\n  const [annotation, setAnnotation] = useState(null);\r\n  const [value, setValue] = useState('');\r\n  const [newDistance, setNewDistance] = useState(0);\r\n  const [unitTo, setUnitTo] = useState('');\r\n  const [showError, setShowError] = useState(false);\r\n  const [t] = useTranslation();\r\n  const inputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    isOpen && inputRef?.current?.focus();\r\n    handleAnnotationsSelected(core.getSelectedAnnotations());\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    const onAnnotationSelected = (annotations, action) => {\r\n      if (action === 'selected') {\r\n        handleAnnotationsSelected(annotations);\r\n      } else if (action === 'deselected') {\r\n        setAnnotation(null);\r\n        setValue('');\r\n        setUnitTo('');\r\n        setNewDistance(0);\r\n      }\r\n    };\r\n\r\n    core.addEventListener('annotationSelected', onAnnotationSelected);\r\n\r\n    return () => core.removeEventListener('annotationSelected', onAnnotationSelected);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const onAnnotationChanged = (annotations, action) => {\r\n      if (\r\n        action === 'modify' &&\r\n        annotations.length === 1 &&\r\n        annotations[0] === annotation\r\n      ) {\r\n        setValue(parseMeasurementContentsByAnnotation(annotation).toFixed(2));\r\n        setUnitTo(annotation.Scale[1][1]);\r\n      }\r\n    };\r\n\r\n    core.addEventListener('annotationChanged', onAnnotationChanged);\r\n    return () => core.removeEventListener('annotationChanged', onAnnotationChanged);\r\n  }, [annotation]);\r\n\r\n  const handleAnnotationsSelected = (annotations) => {\r\n    if (\r\n      annotations?.length === 1 &&\r\n      mapAnnotationToKey(annotations[0]) === 'distanceMeasurement'\r\n    ) {\r\n      const annot = annotations[0];\r\n      setAnnotation(annot);\r\n      const value = parseMeasurementContentsByAnnotation(annot).toFixed(2);\r\n      setValue(value);\r\n      setUnitTo(annot.Scale[1][1]);\r\n      // initial new distance should be the same as the value\r\n      // in case the user doesn't change the input value\r\n      setNewDistance(parseFloat(value));\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setShowError(false);\r\n    setValue(e.target.value);\r\n  };\r\n  const validateInput = (e) => {\r\n    const inputValue = e.target.value.trim();\r\n    if (inputValue === '') {\r\n      setShowError(true);\r\n    }\r\n    if (numberRegex.test(inputValue)) {\r\n      const newDistance = parseFloat(inputValue);\r\n      if (newDistance !== 0) {\r\n        setNewDistance(parseFloat(inputValue));\r\n        setValue(inputValue);\r\n      } else {\r\n        setShowError(true);\r\n      }\r\n    } else if (fractionRegex.test(inputValue)) {\r\n      const [whole, fraction] = inputValue.split(' ');\r\n      if (Number.isFinite(evalFraction(fraction))) {\r\n        const number = Number(whole) + evalFraction(fraction);\r\n        setNewDistance(parseFloat(number));\r\n        setValue(number);\r\n      } else {\r\n        setShowError(true);\r\n      }\r\n    } else if (pureFractionRegex.test(inputValue)) {\r\n      if (Number.isFinite(evalFraction(inputValue))) {\r\n        const number = evalFraction(inputValue);\r\n        setNewDistance(parseFloat(number));\r\n        setValue(number);\r\n      } else {\r\n        setShowError(true);\r\n      }\r\n    } else {\r\n      setShowError(true);\r\n    }\r\n  };\r\n\r\n  const handleSelectChange = (e) => {\r\n    setUnitTo(e.target.value);\r\n  };\r\n  const handleApply = () => {\r\n    const newScale = getNewScale();\r\n    const accurateNewScale = handleLossOfPrecision(newScale);\r\n\r\n    core.setAnnotationStyles(annotation, {\r\n      Scale: accurateNewScale,\r\n    });\r\n\r\n    // this will also set the Scale for the other two measurement tools\r\n    setToolStyles(\r\n      'AnnotationCreateDistanceMeasurement',\r\n      'Scale',\r\n      accurateNewScale\r\n    );\r\n\r\n    dispatch(actions.closeElements([DataElements.CALIBRATION_MODAL]));\r\n  };\r\n\r\n  const handleLossOfPrecision = (scale) => {\r\n    // when the new distance that's entered in the modal is much bigger than the current distance, loss of precision can happen\r\n    // because internally WebViewer will do several multiplications and divisions to get the value to store in a measure dictionary\r\n    // in this case, setting 'Scale' again should fix this issue because this time the new distance and the current distance is very close, and we should get the accurate scale\r\n    annotation.Scale = scale;\r\n\r\n    return getNewScale();\r\n  };\r\n\r\n  const getNewScale = () => {\r\n    const currentDistance = parseMeasurementContentsByAnnotation(annotation);\r\n    const ratio = newDistance / currentDistance;\r\n\r\n    const currentScale = annotation.Scale;\r\n    const newScale = [\r\n      [currentScale[0][0], currentScale[0][1]],\r\n      [currentScale[1][0] * ratio, unitTo],\r\n    ];\r\n\r\n    return newScale;\r\n  };\r\n\r\n  const closeModal = () => {\r\n    dispatch(actions.closeElements([DataElements.CALIBRATION_MODAL]));\r\n  };\r\n  return isDisabled || !annotation ? null : (\r\n    <Swipeable\r\n      onSwipedUp={closeModal}\r\n      onSwipedDown={closeModal}\r\n      preventDefaultTouchmoveEvent\r\n    >\r\n      <div\r\n        className={classNames({\r\n          Modal: true,\r\n          CalibrationModal: true,\r\n          open: isOpen,\r\n          closed: !isOpen,\r\n        })}\r\n        onMouseDown={closeModal}\r\n      > <div className=\"container\" onMouseDown={(e) => e.stopPropagation()}>\r\n          <div className=\"swipe-indicator\" />\r\n          <div className=\"calibration__header\">\r\n            {t('component.calibration')}\r\n          </div>\r\n          <div className=\"calibration__body\">\r\n            <div>{t('message.enterMeasurement')}</div>\r\n            <div className=\"calibration__input\">\r\n              <input\r\n                className={showError ? 'error' : ''}\r\n                ref={inputRef}\r\n                type=\"text\"\r\n                value={value}\r\n                onChange={handleInputChange}\r\n                onBlur={validateInput}\r\n              />\r\n              <select\r\n                className=\"unitToInput\"\r\n                value={unitTo}\r\n                onChange={handleSelectChange}\r\n              >\r\n                {units.to.map((unit) => (\r\n                  <option key={unit} value={unit}>\r\n                    {unit}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            {showError ? <div className=\"errorMeasurement\">{t('message.errorEnterMeasurement')}</div> : null}\r\n          </div>\r\n          <div className=\"calibration__footer\">\r\n            <Button\r\n              dataElement=\"passwordSubmitButton\"\r\n              label={t('action.apply')}\r\n              onClick={handleApply}\r\n              disabled={showError}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Swipeable>\r\n  );\r\n};\r\n\r\nexport default CalibrationModal;\r\n","import CalibrationModal from './CalibrationModal';\r\n\r\nexport default CalibrationModal;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".open.CalibrationModal{visibility:visible}.closed.CalibrationModal{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.CalibrationModal{position:fixed;left:0;bottom:0;z-index:100;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:var(--modal-negative-space)}.CalibrationModal .modal-container .wrapper .modal-content{padding:10px}.CalibrationModal .footer{display:flex;flex-direction:row;justify-content:flex-end;width:100%;margin-top:13px}.CalibrationModal .footer.modal-footer{padding:16px;margin:0;border-top:1px solid var(--divider)}.CalibrationModal .footer .modal-button{display:flex;justify-content:center;align-items:center;padding:6px 18px;margin:8px 0 0;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;height:30px;cursor:pointer}.CalibrationModal .footer .modal-button.cancel{color:var(--secondary-button-text);border:1px solid var(--secondary-button-text)}.CalibrationModal .footer .modal-button.cancel:hover{background-color:var(--document-background-color);color:var(--secondary-button-hover);border:1px solid var(--secondary-button-hover)}.CalibrationModal .footer .modal-button.confirm{margin-left:4px;color:var(--primary-button-text);font-weight:600;background:var(--primary-button)}.CalibrationModal .footer .modal-button.confirm:hover{background:var(--primary-button-hover)}.CalibrationModal .footer .modal-button.confirm.disabled{background:var(--primary-button)!important;opacity:.5}.CalibrationModal .footer .modal-button.secondary-btn-custom{border-radius:4px;border:1px solid var(--primary-button);color:var(--primary-button);padding:2px 20px 4px;cursor:pointer;background-color:#fff}.CalibrationModal .footer .modal-button.secondary-btn-custom:hover{color:var(--secondary-button-hover)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .CalibrationModal .footer .modal-button{padding:23px 8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .CalibrationModal .footer .modal-button{padding:23px 8px}}.CalibrationModal .swipe-indicator{background:var(--divider);border-radius:2px;height:4px;width:38px;position:absolute;top:12px;margin-left:auto;margin-right:auto;left:0;right:0}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .CalibrationModal .swipe-indicator{display:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .CalibrationModal .swipe-indicator{display:none}}.CalibrationModal .container{border-radius:4px;overflow-y:auto;max-height:100%}@media(max-height:500px){.App:not(.is-web-component) .CalibrationModal .container,.CalibrationModal .App:not(.is-web-component) .container{overflow:auto;max-height:100%}}@container (max-height: 500px){.App.is-web-component .CalibrationModal .container,.CalibrationModal .App.is-web-component .container{overflow:auto;max-height:100%}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .CalibrationModal .container,.CalibrationModal .App:not(.is-in-desktop-only-mode):not(.is-web-component) .container{width:100%;position:fixed;left:0;bottom:0;padding-top:4px;min-width:100px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .CalibrationModal .container,.CalibrationModal .App.is-web-component:not(.is-in-desktop-only-mode) .container{width:100%;position:fixed;left:0;bottom:0;padding-top:4px;min-width:100px}}.CalibrationModal .container{display:flex;flex-direction:column;min-width:400px;box-shadow:0 0 3px 0 var(--document-box-shadow);padding:8px;background:var(--component-background)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .CalibrationModal .container{padding:24px 24px 16px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .CalibrationModal .container{padding:24px 24px 16px}}.CalibrationModal .container .calibration__header{font-size:16px;margin-top:8px;margin-bottom:8px}.CalibrationModal .container .calibration__body{padding-top:8px}.CalibrationModal .container .calibration__body .calibration__input{margin-top:8px;display:flex;flex-direction:row;justify-content:space-between}.CalibrationModal .container .calibration__body input{width:100%;height:30px;font-size:13px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding:4px 42px 6px 8px;margin-right:8px}.CalibrationModal .container .calibration__body input:focus{outline:none;border:1px solid var(--focus-border)}.CalibrationModal .container .calibration__body input::-moz-placeholder{color:var(--placeholder-text)}.CalibrationModal .container .calibration__body input::placeholder{color:var(--placeholder-text)}.CalibrationModal .container .calibration__body .error{border:1px solid var(--error-border-color)}.CalibrationModal .container .calibration__body .unitToInput{height:29px;width:45px;border-radius:5px;border:1px solid var(--border);font-size:13px}.CalibrationModal .container .calibration__body .unitToInput:focus{outline:none;border:1px solid var(--focus-border)}.CalibrationModal .container .calibration__body .unitToInput::-moz-placeholder{color:var(--placeholder-text)}.CalibrationModal .container .calibration__body .unitToInput::placeholder{color:var(--placeholder-text)}.CalibrationModal .container .calibration__body .errorMeasurement{font-size:13px;margin-top:8px;margin-bottom:8px;color:var(--error-text-color);max-width:400px}.CalibrationModal .container .calibration__footer{display:flex;justify-content:flex-end;margin-top:8px}.CalibrationModal .container .calibration__footer .Button{display:flex;justify-content:center;align-items:center;color:var(--primary-button-text);font-weight:600;padding:6px 18px;margin-top:8px;margin-left:5px;width:auto;width:-moz-fit-content;width:fit-content;background:var(--primary-button);border-radius:4px;height:30px;cursor:pointer}.CalibrationModal .container .calibration__footer .Button:hover{background:var(--primary-button-hover)}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ruleSet[1].rules[1].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./CalibrationModal.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                function findNestedWebComponents(tagName, root = document) {\r\n                  const elements = [];\r\n\r\n                  // Check direct children\r\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\r\n\r\n                  // Check shadow DOMs\r\n                  root.querySelectorAll('*').forEach(el => {\r\n                    if (el.shadowRoot) {\r\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\r\n                    }\r\n                  });\r\n\r\n                  return elements;\r\n                }\r\n                if (!window.isApryseWebViewerWebComponent) {\r\n                  document.head.appendChild(styleTag);\r\n                  return;\r\n                }\r\n\r\n                let webComponents;\r\n                // First we see if the webcomponent is at the document level\r\n                webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                // If not, we check have to check if it is nested in another webcomponent\r\n                if (!webComponents.length) {\r\n                  webComponents = findNestedWebComponents('apryse-webviewer');\r\n                }\r\n                // Now we append the style tag to each webcomponent\r\n                const clonedStyleTags = [];\r\n                for (let i = 0; i < webComponents.length; i++) {\r\n                  const webComponent = webComponents[i];\r\n                  if (i === 0) {\r\n                    webComponent.shadowRoot.appendChild(styleTag);\r\n                    styleTag.onload = function () {\r\n                      if (clonedStyleTags.length > 0) {\r\n                        clonedStyleTags.forEach((styleNode) => {\r\n                          // eslint-disable-next-line no-unsanitized/property\r\n                          styleNode.innerHTML = styleTag.innerHTML;\r\n                        });\r\n                      }\r\n                    };\r\n                  } else {\r\n                    const styleNode = styleTag.cloneNode(true);\r\n                    webComponent.shadowRoot.appendChild(styleNode);\r\n                    clonedStyleTags.push(styleNode);\r\n                  }\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"names":["fraction","_fraction$split2","split","numerator","denominator","Number","parseMeasurementContentsByAnnotation","annotation","factor","Measure","axis","Scale","getLineLength","numberRegex","fractionRegex","pureFractionRegex","_useSelector2","_slicedToArray","useSelector","state","selectors","isElementOpen","DataElements","CALIBRATION_MODAL","isElementDisabled","getMeasurementUnits","shallowEqual","isOpen","isDisabled","units","dispatch","useDispatch","_useState2","useState","setAnnotation","_useState4","value","setValue","_useState6","newDistance","setNewDistance","_useState8","unitTo","setUnitTo","_useState10","showError","setShowError","t","useTranslation","inputRef","useRef","useEffect","_inputRef$current","current","focus","handleAnnotationsSelected","core","getSelectedAnnotations","onAnnotationSelected","annotations","action","addEventListener","removeEventListener","onAnnotationChanged","length","toFixed","mapAnnotationToKey","annot","parseFloat","getNewScale","currentDistance","ratio","currentScale","closeModal","actions","closeElements","React","Swipeable","onSwipedUp","onSwipedDown","preventDefaultTouchmoveEvent","className","classNames","Modal","CalibrationModal","open","closed","onMouseDown","e","stopPropagation","ref","type","onChange","target","onBlur","inputValue","trim","test","_inputValue$split2","whole","isFinite","evalFraction","number","to","map","unit","key","Button","dataElement","label","onClick","scale","newScale","accurateNewScale","setAnnotationStyles","setToolStyles","disabled","exports","___CSS_LOADER_API_IMPORT___","push","module","id","locals","api","content","__esModule","default","options","styleTag","window","isApryseWebViewerWebComponent","document","head","appendChild","webComponents","getElementsByTagName","findNestedWebComponents","tagName","root","elements","querySelectorAll","forEach","el","shadowRoot","clonedStyleTags","i","webComponent","onload","styleNode","innerHTML","cloneNode"],"sourceRoot":""}