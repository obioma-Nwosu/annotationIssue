{"version":3,"file":"chunks/477.chunk.js","mappings":"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","sources":["webpack://webviewer-ui/./src/components/PageRedactionModal/PageRedactionModal.js","webpack://webviewer-ui/./src/components/PageRedactionModal/PageRedactionModalContainer.js","webpack://webviewer-ui/./src/components/PageRedactionModal/index.js","webpack://webviewer-ui/./src/components/PageRedactionModal/PageRedactionModal.scss","webpack://webviewer-ui/./src/components/PageRedactionModal/PageRedactionModal.scss?bc0a"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport DataElements from 'constants/dataElement';\r\nimport pageNumberPlaceholder from 'constants/pageNumberPlaceholder';\r\nimport classNames from 'classnames';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Button from 'components/Button';\r\nimport Choice from 'components/Choice';\r\nimport { Swipeable } from 'react-swipeable';\r\nimport PropTypes from 'prop-types';\r\nimport { FocusTrap } from '@pdftron/webviewer-react-toolkit';\r\nimport PageNumberInput from 'components/PageReplacementModal/PageNumberInput';\r\n\r\nimport './PageRedactionModal.scss';\r\n\r\nconst propTypes = {\r\n  closeModal: PropTypes.func,\r\n  currentPage: PropTypes.number,\r\n  pageLabels: PropTypes.array,\r\n  selectedPages: PropTypes.array,\r\n  markPages: PropTypes.func,\r\n  redactPages: PropTypes.func,\r\n  evenDisabled: PropTypes.bool,\r\n  renderCanvases: PropTypes.func,\r\n  isOpen: PropTypes.bool,\r\n};\r\n\r\nconst SelectionTypes = {\r\n  CURRENT: 'current',\r\n  SPECIFY: 'specify',\r\n  ODD: 'odd',\r\n  EVEN: 'even',\r\n};\r\n\r\nconst PageRedactionModal = ({\r\n  closeModal,\r\n  pageLabels,\r\n  selectedPages,\r\n  currentPage,\r\n  markPages,\r\n  redactPages,\r\n  evenDisabled,\r\n  renderCanvases,\r\n  isOpen,\r\n}) => {\r\n  const { t } = useTranslation();\r\n\r\n  const [selectionType, setSelectionType] = useState(SelectionTypes.CURRENT);\r\n  const [pages, setPages] = useState();\r\n  useEffect(() => {\r\n    setPages(selectedPages);\r\n  }, [selectedPages]);\r\n\r\n  const getSelectedPages = () => {\r\n    const pageNumbers = [];\r\n    if (selectionType === SelectionTypes.CURRENT) {\r\n      return [currentPage];\r\n    }\r\n    if (selectionType === SelectionTypes.SPECIFY) {\r\n      return pages;\r\n    }\r\n    if (selectionType === SelectionTypes.ODD) {\r\n      for (let i = 1; pageLabels.length >= i; i += 2) {\r\n        pageNumbers.push(i);\r\n      }\r\n    } else if (selectionType === SelectionTypes.EVEN) {\r\n      for (let i = 2; pageLabels.length >= i; i += 2) {\r\n        pageNumbers.push(i);\r\n      }\r\n    }\r\n    return pageNumbers;\r\n  };\r\n\r\n  const onMark = () => markPages(getSelectedPages());\r\n  const onRedact = () => redactPages(getSelectedPages());\r\n\r\n  const canvasContainer = useRef();\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      renderCanvases(canvasContainer, getSelectedPages());\r\n    }\r\n  }, [selectionType, isOpen, pages, renderCanvases, getSelectedPages]);\r\n\r\n  const onSwipe = (e) => {\r\n    const eventTarget = e.event.target;\r\n    const containerHasScroll =\r\n      canvasContainer.current.clientHeight < canvasContainer.current.scrollHeight ||\r\n      canvasContainer.current.clientWidth < canvasContainer.current.scrollWidth;\r\n    if (\r\n      containerHasScroll &&\r\n      (eventTarget === canvasContainer.current || canvasContainer.current.contains(eventTarget))\r\n    ) {\r\n      e.event.stopPropagation();\r\n    } else {\r\n      closeModal();\r\n    }\r\n  };\r\n\r\n  const onSelectionChange = (e) => {\r\n    if (!e.target.classList.contains('page-number-input')) {\r\n      setSelectionType(e.target.value);\r\n    }\r\n  };\r\n  const onPagesChanged = (pages) => setPages(pages);\r\n\r\n  return (\r\n    <Swipeable onSwipedUp={onSwipe} onSwipedDown={onSwipe} preventDefaultTouchmoveEvent focus>\r\n      <FocusTrap locked={isOpen}>\r\n        <div\r\n          className={classNames({\r\n            Modal: true,\r\n            PageRedactionModal: true,\r\n            open: isOpen,\r\n            closed: !isOpen,\r\n          })}\r\n          data-element={DataElements.PAGE_REDACT_MODAL}\r\n        >\r\n          <div className=\"container\">\r\n            <div className=\"swipe-indicator\" />\r\n            <div className=\"header\">\r\n              <div className=\"header-text\">{t('option.pageRedactModal.header')}</div>\r\n              <Button onClick={closeModal} img=\"icon-close\" />\r\n            </div>\r\n            <div className=\"body\">\r\n              <div className=\"canvas-container\" ref={canvasContainer} />\r\n              <form className=\"selection-options\" onChange={onSelectionChange} onSubmit={(e) => e.preventDefault()}>\r\n                <strong>{t('option.pageRedactModal.pageSelection')}</strong>\r\n                <Choice\r\n                  checked={selectionType === SelectionTypes.CURRENT}\r\n                  radio\r\n                  name=\"page-redaction-option\"\r\n                  label={t('option.pageRedactModal.current')}\r\n                  value={SelectionTypes.CURRENT}\r\n                />\r\n                <Choice\r\n                  checked={selectionType === SelectionTypes.SPECIFY}\r\n                  radio\r\n                  name=\"page-redaction-option\"\r\n                  label={t('option.pageRedactModal.specify')}\r\n                  value={SelectionTypes.SPECIFY}\r\n                />\r\n                {selectionType === 'specify' && (\r\n                  <PageNumberInput\r\n                    selectedPageNumbers={pages}\r\n                    pageCount={pageLabels.length}\r\n                    onBlurHandler={onPagesChanged}\r\n                    placeHolder={pageNumberPlaceholder}\r\n                  />\r\n                )}\r\n                <Choice\r\n                  checked={selectionType === SelectionTypes.ODD}\r\n                  radio\r\n                  name=\"page-redaction-option\"\r\n                  label={t('option.pageRedactModal.odd')}\r\n                  value={SelectionTypes.ODD}\r\n                />\r\n                <Choice\r\n                  checked={selectionType === SelectionTypes.EVEN}\r\n                  radio\r\n                  name=\"page-redaction-option\"\r\n                  label={t('option.pageRedactModal.even')}\r\n                  value={SelectionTypes.EVEN}\r\n                  disabled={evenDisabled}\r\n                />\r\n              </form>\r\n            </div>\r\n            <div className=\"footer\">\r\n              <Button\r\n                className=\"cancel modal-button\"\r\n                dataElement=\"modalRedactButton\"\r\n                label=\"annotation.redact\"\r\n                onClick={onRedact}\r\n              />\r\n              <Button\r\n                className=\"confirm modal-button\"\r\n                dataElement=\"modalMarkRedactButton\"\r\n                label=\"option.pageRedactModal.addMark\"\r\n                onClick={onMark}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </FocusTrap>\r\n    </Swipeable>\r\n  );\r\n};\r\n\r\nPageRedactionModal.propTypes = propTypes;\r\n\r\nexport default PageRedactionModal;\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport DataElements from 'constants/dataElement';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport selectors from 'selectors';\r\nimport actions from 'actions';\r\nimport core from 'core';\r\nimport { createPageRedactions, redactPages } from 'helpers/pageManipulationFunctions';\r\nimport PageRedactionModal from 'components/PageRedactionModal/PageRedactionModal';\r\n\r\nimport './PageRedactionModal.scss';\r\n\r\nconst MAX_CANVAS_COUNT = 10;\r\n\r\nconst PageRedactionModalContainer = () => {\r\n  const dispatch = useDispatch();\r\n  const [isOpen, currentPage, selectedIndexes, pageLabels, activeToolName, activeToolStyles] = useSelector((state) => [\r\n    selectors.isElementOpen(state, DataElements.PAGE_REDACT_MODAL),\r\n    selectors.getCurrentPage(state),\r\n    selectors.getSelectedThumbnailPageIndexes(state),\r\n    selectors.getPageLabels(state),\r\n    selectors.getActiveToolName(state),\r\n    selectors.getActiveToolStyles(state)\r\n  ]);\r\n  const renderCanvasesCount = useRef(0);\r\n\r\n  const selectedPages = selectedIndexes.map((index) => index + 1);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      dispatch(actions.closeElements([\r\n        DataElements.PRINT_MODAL,\r\n        DataElements.LOADING_MODAL,\r\n        DataElements.PROGRESS_MODAL,\r\n        DataElements.ERROR_MODAL,\r\n      ]));\r\n    }\r\n  }, [isOpen, dispatch]);\r\n\r\n  const closeModal = () => dispatch(actions.closeElement(DataElements.PAGE_REDACT_MODAL));\r\n\r\n  const getRedactionStyles = () => (activeToolName?.includes('AnnotationCreateRedaction') ? activeToolStyles : {});\r\n\r\n  const onRedact = (pageNumbers) => {\r\n    redactPages(pageNumbers, getRedactionStyles());\r\n    closeModal();\r\n  };\r\n\r\n  const markPages = (pageNumbers) => {\r\n    createPageRedactions(pageNumbers, getRedactionStyles());\r\n    closeModal();\r\n  };\r\n\r\n  const renderCanvases = (canvasContainer, pageNumbers) => {\r\n    renderCanvasesCount.current++;\r\n    const callCount = renderCanvasesCount.current;\r\n    // Clone the array so that we don't modify the original array\r\n    let pagesToRender = [...pageNumbers];\r\n\r\n    const doc = core.getDocument();\r\n    while (canvasContainer.current.firstChild) {\r\n      canvasContainer.current.removeChild(canvasContainer.current.firstChild);\r\n    }\r\n    if (!pagesToRender) {\r\n      return;\r\n    }\r\n    if (pagesToRender?.length > MAX_CANVAS_COUNT) {\r\n      pagesToRender = pagesToRender.splice(0, MAX_CANVAS_COUNT);\r\n    }\r\n    for (const pageNumber of pagesToRender) {\r\n      const pageInfo = doc?.getPageInfo(pageNumber);\r\n      if (isOpen && doc && canvasContainer.current && pageInfo) {\r\n        let zoom = 1;\r\n        const rect = canvasContainer.current.getBoundingClientRect();\r\n        const borderWidth = parseInt(window.getComputedStyle(canvasContainer.current).borderWidth) + 0.1;\r\n        rect.height -= borderWidth;\r\n        rect.width -= borderWidth;\r\n        if (pageInfo.width > pageInfo.height) {\r\n          zoom = rect.width / pageInfo.width;\r\n        } else {\r\n          zoom = rect.height / pageInfo.height;\r\n        }\r\n        zoom > 0 && doc.loadCanvas({\r\n          pageNumber,\r\n          zoom,\r\n          pageRotation: 0,\r\n          drawComplete: (canvas) => {\r\n            callCount === renderCanvasesCount.current && canvasContainer.current?.appendChild(canvas);\r\n          },\r\n          allowUseOfOptimizedThumbnail: true\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const [evenDisabled, setEvenDisabled] = useState(false);\r\n  useEffect(() => {\r\n    const docLoaded = () => {\r\n      const document = core.getDocument();\r\n      const documentCompletePromise = document.getDocumentCompletePromise();\r\n\r\n      // Office documents don't have all pages available onload, so we need to\r\n      // wait for the documentCompletePromise to resolve before we can check\r\n      documentCompletePromise?.then(() => {\r\n        const pageCount = document.getPageCount();\r\n        if (pageCount < 2) {\r\n          setEvenDisabled(true);\r\n        } else {\r\n          setEvenDisabled(false);\r\n        }\r\n      });\r\n    };\r\n    core.addEventListener('documentLoaded', docLoaded);\r\n    return () => core.removeEventListener('documentLoaded', docLoaded);\r\n  }, []);\r\n\r\n  return (\r\n    <PageRedactionModal\r\n      evenDisabled={evenDisabled}\r\n      closeModal={closeModal}\r\n      renderCanvases={renderCanvases}\r\n      redactPages={onRedact}\r\n      markPages={markPages}\r\n      currentPage={currentPage}\r\n      selectedPages={selectedPages}\r\n      pageLabels={pageLabels}\r\n      isOpen={isOpen}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PageRedactionModalContainer;","import PageRedactionModalContainer from 'components/PageRedactionModal/PageRedactionModalContainer';\r\n\r\nexport default PageRedactionModalContainer;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".open.PageRedactionModal{visibility:visible}.closed.PageRedactionModal{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.PageRedactionModal{position:fixed;left:0;bottom:0;z-index:100;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:var(--modal-negative-space)}.PageRedactionModal .modal-container .wrapper .modal-content{padding:10px}.PageRedactionModal .footer{display:flex;flex-direction:row;justify-content:flex-end;width:100%;margin-top:13px}.PageRedactionModal .footer.modal-footer{padding:16px;margin:0;border-top:1px solid var(--divider)}.PageRedactionModal .footer .modal-button{display:flex;justify-content:center;align-items:center;padding:6px 18px;margin:8px 0 0;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;height:30px;cursor:pointer}.PageRedactionModal .footer .modal-button.cancel{color:var(--secondary-button-text);border:1px solid var(--secondary-button-text)}.PageRedactionModal .footer .modal-button.cancel:hover{background-color:var(--document-background-color);color:var(--secondary-button-hover);border:1px solid var(--secondary-button-hover)}.PageRedactionModal .footer .modal-button.confirm{margin-left:4px;color:var(--primary-button-text);font-weight:600;background:var(--primary-button)}.PageRedactionModal .footer .modal-button.confirm:hover{background:var(--primary-button-hover)}.PageRedactionModal .footer .modal-button.confirm.disabled{background:var(--primary-button)!important;opacity:.5}.PageRedactionModal .footer .modal-button.secondary-btn-custom{border-radius:4px;border:1px solid var(--primary-button);color:var(--primary-button);padding:2px 20px 4px;cursor:pointer;background-color:#fff}.PageRedactionModal .footer .modal-button.secondary-btn-custom:hover{color:var(--secondary-button-hover)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .footer .modal-button{padding:23px 8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .footer .modal-button{padding:23px 8px}}.PageRedactionModal .swipe-indicator{background:var(--divider);border-radius:2px;height:4px;width:38px;position:absolute;top:12px;margin-left:auto;margin-right:auto;left:0;right:0}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .swipe-indicator{display:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .swipe-indicator{display:none}}.PageRedactionModal .container{border-radius:4px;overflow-y:auto;max-height:100%}@media(max-height:500px){.App:not(.is-web-component) .PageRedactionModal .container,.PageRedactionModal .App:not(.is-web-component) .container{overflow:auto;max-height:100%}}@container (max-height: 500px){.App.is-web-component .PageRedactionModal .container,.PageRedactionModal .App.is-web-component .container{overflow:auto;max-height:100%}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .container,.PageRedactionModal .App:not(.is-in-desktop-only-mode):not(.is-web-component) .container{width:100%;position:fixed;left:0;bottom:0;padding-top:4px;min-width:100px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .container,.PageRedactionModal .App.is-web-component:not(.is-in-desktop-only-mode) .container{width:100%;position:fixed;left:0;bottom:0;padding-top:4px;min-width:100px}}.PageRedactionModal .container{align-items:center;background:var(--component-background);box-shadow:0 0 3px 0 var(--document-box-shadow);width:888px}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .container{width:480px}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .container{width:480px}}.PageRedactionModal .container .header{width:100%;display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid var(--divider)}.PageRedactionModal .container .header .header-text{font-size:var(--font-size-large);font-weight:700}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .container .header .header-text{font-size:var(--font-size-medium)}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .container .header .header-text{font-size:var(--font-size-medium)}}.PageRedactionModal .container .header .Button:hover{background-color:var(--popup-button-hover)}.PageRedactionModal .container .body{padding:16px;grid-gap:16px;gap:16px;display:flex;width:100%}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .container .body{display:flex;grid-gap:5px;gap:5px;flex-direction:column}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .container .body{display:flex;grid-gap:5px;gap:5px;flex-direction:column}}.PageRedactionModal .container .body .canvas-container{border:1px solid var(--gray-5);height:448px;width:60%;background-color:var(--divider);display:flex;align-items:center;justify-content:space-between;flex-direction:column;overflow:auto;grid-gap:5px;gap:5px}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .container .body .canvas-container{width:55%;height:300px}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .container .body .canvas-container{width:55%;height:300px}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .container .body .canvas-container{width:100%;height:250px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .container .body .canvas-container{width:100%;height:250px}}.PageRedactionModal .container .body .selection-options{width:40%;grid-gap:8px;gap:8px;display:flex;flex-direction:column}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .container .body .selection-options{width:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .container .body .selection-options{width:100%}}.PageRedactionModal .container .body .selection-options .page-number-input{height:28px;width:90%;align-self:flex-end}.PageRedactionModal .container .body .selection-options .ui__choice--disabled{text-decoration:line-through}.PageRedactionModal .container .body .selection-options .ui__choice{font-size:13px}.PageRedactionModal .container .footer{margin-top:0;width:100%;display:flex;align-items:center;justify-content:flex-end;padding:16px;border-top:1px solid var(--divider)}.PageRedactionModal .container .footer .Button{margin-top:0}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .container .footer .Button{padding:8px 16px!important}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .container .footer .Button{padding:8px 16px!important}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ruleSet[1].rules[1].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./PageRedactionModal.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                function findNestedWebComponents(tagName, root = document) {\r\n                  const elements = [];\r\n\r\n                  // Check direct children\r\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\r\n\r\n                  // Check shadow DOMs\r\n                  root.querySelectorAll('*').forEach(el => {\r\n                    if (el.shadowRoot) {\r\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\r\n                    }\r\n                  });\r\n\r\n                  return elements;\r\n                }\r\n                if (!window.isApryseWebViewerWebComponent) {\r\n                  document.head.appendChild(styleTag);\r\n                  return;\r\n                }\r\n\r\n                let webComponents;\r\n                // First we see if the webcomponent is at the document level\r\n                webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                // If not, we check have to check if it is nested in another webcomponent\r\n                if (!webComponents.length) {\r\n                  webComponents = findNestedWebComponents('apryse-webviewer');\r\n                }\r\n                // Now we append the style tag to each webcomponent\r\n                const clonedStyleTags = [];\r\n                for (let i = 0; i < webComponents.length; i++) {\r\n                  const webComponent = webComponents[i];\r\n                  if (i === 0) {\r\n                    webComponent.shadowRoot.appendChild(styleTag);\r\n                    styleTag.onload = function () {\r\n                      if (clonedStyleTags.length > 0) {\r\n                        clonedStyleTags.forEach((styleNode) => {\r\n                          // eslint-disable-next-line no-unsanitized/property\r\n                          styleNode.innerHTML = styleTag.innerHTML;\r\n                        });\r\n                      }\r\n                    };\r\n                  } else {\r\n                    const styleNode = styleTag.cloneNode(true);\r\n                    webComponent.shadowRoot.appendChild(styleNode);\r\n                    clonedStyleTags.push(styleNode);\r\n                  }\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"names":["propTypes","closeModal","PropTypes","currentPage","pageLabels","selectedPages","markPages","redactPages","evenDisabled","renderCanvases","isOpen","SelectionTypes","PageRedactionModal","_ref","t","useTranslation","_useState2","_slicedToArray","useState","selectionType","setSelectionType","_useState4","pages","setPages","useEffect","getSelectedPages","pageNumbers","i","length","push","canvasContainer","useRef","onSwipe","e","eventTarget","event","target","current","clientHeight","scrollHeight","clientWidth","scrollWidth","contains","stopPropagation","React","Swipeable","onSwipedUp","onSwipedDown","preventDefaultTouchmoveEvent","focus","FocusTrap","locked","className","classNames","Modal","open","closed","DataElements","PAGE_REDACT_MODAL","Button","onClick","img","ref","onChange","classList","value","onSubmit","preventDefault","Choice","checked","radio","name","label","PageNumberInput","selectedPageNumbers","pageCount","onBlurHandler","placeHolder","pageNumberPlaceholder","disabled","dataElement","dispatch","useDispatch","_useSelector2","useSelector","state","selectors","isElementOpen","getCurrentPage","getSelectedThumbnailPageIndexes","getPageLabels","getActiveToolName","getActiveToolStyles","selectedIndexes","activeToolName","activeToolStyles","renderCanvasesCount","map","index","actions","closeElements","PRINT_MODAL","LOADING_MODAL","PROGRESS_MODAL","ERROR_MODAL","closeElement","getRedactionStyles","includes","setEvenDisabled","docLoaded","document","core","getDocument","documentCompletePromise","getDocumentCompletePromise","then","getPageCount","addEventListener","removeEventListener","_pagesToRender","callCount","pagesToRender","doc","firstChild","removeChild","splice","_step","_iterator","_createForOfIteratorHelper","s","n","done","pageNumber","pageInfo","getPageInfo","zoom","rect","getBoundingClientRect","borderWidth","parseInt","window","getComputedStyle","height","width","loadCanvas","pageRotation","drawComplete","canvas","_canvasContainer$curr","appendChild","allowUseOfOptimizedThumbnail","err","f","createPageRedactions","exports","___CSS_LOADER_API_IMPORT___","module","id","locals","api","content","__esModule","default","options","styleTag","isApryseWebViewerWebComponent","head","webComponents","getElementsByTagName","findNestedWebComponents","tagName","root","elements","querySelectorAll","forEach","el","shadowRoot","clonedStyleTags","webComponent","onload","styleNode","innerHTML","cloneNode"],"sourceRoot":""}